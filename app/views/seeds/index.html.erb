<p><%= link_to 'Register New Seed', new_seed_path %></p>

<div id="seed_title">
<h2>My Seeds:</h2>
</div>

<% my_seeds = Array.new %>
<% Project.where(user_id: current_user.id).each do |project| %>
	<% Cycle.where(project_id: project.id).each do |cycle| %>
		<% Seedtag.where(cycle_id: cycle.id).each do |seedtag| %>
			<% my_seeds.push(Seed.find(seedtag.seed_id)) %>
		<% end %>
	<% end %>
<% end %>

<% if my_seeds %>
	<% my_seeds = my_seeds.uniq %>
	<% my_seeds.sort_by!{ |s| s.name.downcase } %>

	<table>
		<% 0.upto((my_seeds.length - 1) / 4) do |index| %>
		<tr>
			<% i = index * 4 %>
			<div id='seed_info_test'>
				<td><h3><%= my_seeds[i].name %></h3>
					<p>Days for seed to sprout: <%= my_seeds[i].min_duration %> - <%= my_seeds[i].max_duration %></p>
					<p>Plant Family: <%= my_seeds[i].family %></p>
					<p>Nutrition: <%= my_seeds[i].nutrition %></p>
					<p>Tips: <%= my_seeds[i].nutrition %></p>
				</td>
			</div>
			<% if my_seeds.length > (i + 1) %>
				<div id='seed_info'>
					<td><h3><%= my_seeds[i + 1].name %></h3>
						<p>Days for seed to sprout: <%= my_seeds[i + 1].min_duration %> - <%= my_seeds[i + 1].max_duration %></p>
						<p>Plant Family: <%= my_seeds[i + 1].family %></p>
						<p>Nutrition: <%= my_seeds[i + 1].nutrition %></p>
						<p>Tips: <%= my_seeds[i + 1].nutrition %></p>
					</td>
				</div>
			<% end %>
			<% if my_seeds.length > (i + 2) %>
				<div id='seed_info'>
					<td><h3><%= my_seeds[i + 2].name %></h3>
						<p>Days for seed to sprout: <%= my_seeds[i + 2].min_duration %> - <%= my_seeds[i + 2].max_duration %></p>
						<p>Plant Family: <%= my_seeds[i + 2].family %></p>
						<p>Nutrition: <%= my_seeds[i + 2].nutrition %></p>
						<p>Tips: <%= my_seeds[i + 2].nutrition %></p>
					</td>
				</div>
			<% end %>
			<% if my_seeds.length > (i + 3) %>
				<div id='seed_info'>
					<td><h3><%= my_seeds[i + 3].name %></h3>
						<p>Days for seed to sprout: <%= my_seeds[i + 3].min_duration %> - <%= my_seeds[i + 3].max_duration %></p>
						<p>Plant Family: <%= my_seeds[i + 3].family %></p>
						<p>Nutrition: <%= my_seeds[i + 3].nutrition %></p>
						<p>Tips: <%= my_seeds[i + 3].nutrition %></p>
					</td>
				</div>
			<% end %>
		</tr>
		<% end %>
	</table>
<% end %>

<div id="seed_title">
<h2>Other Seeds:</h2>
</div>

<% other_seeds = Array.new %>
<% Seed.all.each do |seed| %>
	<% unless my_seeds.include?(seed) %>
		<% other_seeds.push(seed) %>
	<% end %>
<% end %>

<% other_seeds.sort_by!{ |s| s.name.downcase } %>
<table>
	<% 0.upto((other_seeds.length - 1) / 4) do |index| %>
		<tr>
			<% i = index * 4 %>
			<div id='seed_info'><td><h3><%= other_seeds[i].name %></h3>
				<p>Days for seed to sprout: <%= other_seeds[i].min_duration %> - <%= other_seeds[i].max_duration %></p>
				<p>Plant Family: <%= other_seeds[i].family %></p>
				<p>Nutrition: <%= other_seeds[i].nutrition %></p>
				<p>Tips: <%= other_seeds[i].nutrition %></p>
			</td></div>
			<% if other_seeds.length > (i + 1) %>
				<div id='seed_info'><td><h3><%= other_seeds[i + 1].name %></h3>
					<p>Days for seed to sprout: <%= other_seeds[i + 1].min_duration %> - <%= other_seeds[i + 1].max_duration %></p>
					<p>Plant Family: <%= other_seeds[i + 1].family %></p>
					<p>Nutrition: <%= other_seeds[i + 1].nutrition %></p>
					<p>Tips: <%= other_seeds[i + 1].nutrition %></p>
				</td></div>
			<% end %>
			<% if other_seeds.length > (i + 2) %>
				<div id='seed_info'><td><h3><%= other_seeds[i + 2].name %></h3>
					<p>Days for seed to sprout: <%= other_seeds[i + 2].min_duration %> - <%= other_seeds[i + 2].max_duration %></p>
					<p>Plant Family: <%= other_seeds[i + 2].family %></p>
					<p>Nutrition: <%= other_seeds[i + 2].nutrition %></p>
					<p>Tips: <%= other_seeds[i + 2].nutrition %></p>
				</td></div>
			<% end %>
			<% if other_seeds.length > (i + 3) %>
				<div id='seed_info'><td><h3><%= other_seeds[i + 3].name %></h3>
					<p>Days for seed to sprout: <%= other_seeds[i + 3].min_duration %> - <%= other_seeds[i + 3].max_duration %></p>
					<p>Plant Family: <%= other_seeds[i + 3].family %></p>
					<p>Nutrition: <%= other_seeds[i + 3].nutrition %></p>
					<p>Tips: <%= other_seeds[i + 3].nutrition %></p>
				</td></div>
			<% end %>
		</tr>
	<% end %>
</table>